a0=[1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1]';
a1=[4.9176 5.0208 4.5429 4.5573 5.0597 3.8910 5.8980 5.6039 15.4202 14.4598 5.8282 5.3003 6.2712 5.9592 5.0500 5.6039 8.2464 6.6969 7.7841 9.0384 5.9894 7.5422 8.7951 6.0931 8.3607 8.1400 9.1416 12.0000]';
a2=[1 1 1 1 1 1 1 1 2.5 2.5 1 1 1 1 1 1 1.5 1.5 1.5 1 1 1.5 1.5 1.5 1.5 1 1.5 1.5]';
a3=[3.4720 3.5310 2.2750 4.0500 4.4550 4.4550 5.8500 9.5200 9.800 12.800 6.4350 4.9883 5.5200 6.6660 5.0000 9.5200 5.1500 6.0920 7.1020 7.8000 5.5200 4.0000 9.8900 6.7265 9.1500 8.0000 7.3262 5.0000]';
a4=[0.9980 1.5000 1.1750 1.2320 1.1210 0.9880 1.2400 1.5010 3.4200 3.0000 1.2250 1.5520 0.9750 1.1210 1.0200 1.5010 1.6640 1.4880 1.3760 1.5000 1.2560 1.6900 1.8200 1.6520 1.7770 1.5040 1.8310 1.2000]';
a5=[1 2 1 1 1 1 1 0 2 2 2 1 1 2 0 0 2 1.5 1 1.5 2 1 2 1 2 2 1.5 2]';
a6=[7 7 6 6 6 6 7 6 10 9 6 6 5 6 5 6 8 7 6 7 6 6 8 6 8 7 8 6]';
a7=[4 4 3 3 3 3 3 3 5 5 3 3 2 3 2 3 4 3 3 3 3 3 4 3 4 3 4 3]';
a8=[42 62 40 54 42 56 51 32 42 14 32 30 30 32 46 32 50 22 17 23 40 22 50 44 48 3 31 30]';
a9=[3 1 2 4 3 2 2 1 2 4 1 1 1 2 4 1 4 1 2 3 4 1 1 4 1 1 4 3]';
a10=[1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 1 1 1 3 1 1 1 1 1 3 1 1]';
a11=[0 0 0 0 0 0 1 0 1 1 0 0 0 0 1 0 0 1 0 0 1 0 1 0 1 0 0 1]';
y=[25.9 29.5 27.9 25.9 29.9 29.9 30.9 28.9 84.9 82.9 35.9 31.5 31.0 30.9 30.0 28.9 36.9 41.9 40.5 43.9 37.5 37.9 44.5 37.9 38.9 36.9 45.8 41.0]';
A=ones(28,12);
A(1:28,1)=a0;A(1:28,2)=a1;A(1:28,3)=a2;A(1:28,4)=a3;A(1:28,5)=a4;A(1:28,6)=a5;A(1:28,7)=a6;A(1:28,8)=a7;A(1:28,9)=a8;A(1:28,10)=a9;A(1:28,11)=a10;A(1:28,12)=a11;
[x]=LS(A,y);         %QR分解法所得
[X]=(A'*A)\A'*y;     %直接用广义逆求解所得
loss=norm(A*x-y);
A1=ones(28,2);
A1(1:28,1)=a0;A1(1:28,2)=a7;
[x1]=LS(A1,y);        %仅考虑居室数目
A2=ones(28,3);
A2(1:28,1)=a0;A2(1:28,2)=a7;A2(1:28,3)=a4;
[x2]=LS(A2,y);       %仅考虑居室数目和居住面积
A3=ones(28,11);
A3(1:28,1)=a0;A3(1:28,2)=a1;A3(1:28,3)=a2;A3(1:28,4)=a3;A3(1:28,5)=a4;A3(1:28,6)=a5;A3(1:28,7)=a6;A3(1:28,8)=a7;A3(1:28,9)=a8;A3(1:28,10)=a9;A3(1:28,11)=a11;
[x3]=LS(A3,y);       %去掉户型
aa1=a1/(max(a1));aa2=a2/(max(a2));aa3=a3/(max(a3));aa4=a4/(max(a4));
aa5=a5/(max(a5));aa6=a6/(max(a6));aa7=a7/(max(a7));aa8=a8/(max(a8));
aa9=a9/(max(a9));aa10=a10/(max(a10));aa11=a11/(max(a11));
A4=ones(28,2);
A4(1:28,1)=a0;A4(1:28,2)=aa4;
[x4]=LS(A4,aa1);
plot(aa4,aa1,'k*');
hold on
t=0:0.01:1;
f=x4(1)+x4(2)*t;
plot(t,f,'r');        %共线性分析
A5=ones(28,10);
A5(1:28,1)=a0;A5(1:28,2)=a2;A5(1:28,3)=a3;A5(1:28,4)=a4;A5(1:28,5)=a5;A5(1:28,6)=a6;A5(1:28,7)=a7;A5(1:28,8)=a8;A5(1:28,9)=a9;A5(1:28,10)=a11;
[x5]=LS(A5,y);       %去掉户型和税